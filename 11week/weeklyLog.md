# WEEK 11

[참고](https://incheol-jung.gitbook.io/docs/q-and-a/spring/n+1)
```
[이 주의 과제]
1. API 게이트웨이 개발 초안 빨리 PR [완료]
2. 기술 질문 (이 주의 과제) - ORM, n + 1, 영속성 컨텍스트 (EntityManger, Entity 생명주기, 1차 캐시, 쓰기 지연, dirty checking, flush)
3. 인성 면접 질문 복습 [ㅋㅋ 나름대로 생각은 해봄]
```


## [1. API 게이트웨이 개발 초안]
[[#3] supermarket 프로젝트 세팅 및 API GATEWAY 서버의 스프링 시큐리티 기본 설정 및 패스워드 인코딩 구현](https://github.com/f-lab-edu/super-market/pull/6)

[[#4] 멤버 엔티티 및 레포지토리 개발](https://github.com/f-lab-edu/super-market/pull/7)

[[#5] API GATEWAY 서버에 멤버 등록 기능 구현 및 Valid를 이용한 DTO 검증](https://github.com/f-lab-edu/super-market/pull/8)

[[#9] API gateway에서 수행하는 인증 작업을 열거형과 어드바이스를 이용한 핸들링을 통해 체계화](https://github.com/f-lab-edu/super-market/pull/10)

<br><br>


## [2. 자문자답]


----------


### 1. ORM


#### (1) ORM이 뭔데요?
> ##### ORM은 객체지향과 관계형 DB의 추구하는 목적이 다르다보니 생기는 차이들을 해소하기 위해 나온 개념입니다. 이를 이용하면 개발자는 객제지향적으로 데이터베이스를 조작할 수 있게 된다는 이점을 얻을 수 있습니다.
```
하지만 지연 로딩과 같은 JPA의 기능들로 인해 N+1문제 같은 것들이 일어날 수 있기 때문에 예상치 못한 성능저하를 초래할 수 있습니다.
그렇기에 이런 점을 고려해서 쿼리를 주기적으로 검토하고 최적화 하는 작업이 필요합니다.
```

<details>
<summary> 꼬리질문 1. </summary>

###### 꼬리질문 1. ORM과 SQL을 직접 사용하는 것 중 어떤 경우에 각각을 선호하나요?

```
쿼리를 자주 변경해야 하거나 각 객체간의 관계가 복잡한 경우에 ORM을 사용하는 걸 고려해보면 좋다고 생각합니다.
성능이 중요하거나 쿼리 변경이 자주 일어나지 않고 서비스의 히스토리나 DB에 대한 이해도가 높은 팀원들이 많다면 sql을 직접 사용하는것도 고려해볼 것 같습니다.
```

</details>

----------


### 2. n + 1

#### (1) N + 1 문제가 뭔데요?
> ##### N + 1문제는 ORM을 사용할 때 지연 로딩을 많이 사용하는데 이 경우에 하나의 쿼리와 연관된 쿼리를 가져오는 과정에서 각 연관된 쿼리를 가져오기 위해 N개의 쿼리를 추가로 실행하는걸 의미합니다.
```
단순히 해결방법만 놓고 보면 패치 타입을 이거로 설정하거나 패치 조인을 사용하거나, 배치 사이즈를 건다거나, 엔티티 그래프등을 사용하는 방법으로 해결할 수 있습니다.
```

<details>
<summary> 꼬리질문 1. </summary>

###### 꼬리질문 1. 패치 타입 이거? 그게 뭔가요? 그리고 어떤 상황에 어떻게 쓰는거죠? 쓰면 쿼리 로그는 어떻게 돼요?

```
-
```

</details>

<details>
<summary> 꼬리질문 2. </summary>

###### 꼬리질문 2. 패치 조인은 뭔가요? 그리고 어떤 상황에 어떻게 쓰는거죠? 쓰면 쿼리 로그는 어떻게 돼요?

```
-
```

</details>

<details>
<summary> 꼬리질문 3. </summary>

###### 꼬리질문 3. 배치 사이즈를 걸어서 어떻게 해결하죠? 그리고 어떤 상황에 어떻게 쓰는거죠? 쓰면 쿼리 로그는 어떻게 돼요?
```
-
```

</details>



<details>
<summary> 꼬리질문 4. </summary>

###### 꼬리질문 4. 엔티티 그래프? 그게 뭔데요? 그리고 어떤 상황에 어떻게 쓰는거죠? 쓰면 쿼리 로그는 어떻게 돼요?

```
-
```

</details>


<details>
<summary> 꼬리질문 5. </summary>

###### 꼬리질문 5. 실제 프로젝트에서 N+1 문제를 해결한 경험 있나요 ?

```
-
```

</details>


<details>
<summary> 꼬리질문 z. </summary>

###### 꼬리질문 z. N+1 문제가 발생하는 것을 코드 작성 단계에서 미리 어떻게 인지할 수 있나요?
```
-
```

</details>

----------


### 3. 영속성 컨텍스트 (EntityManger, Entity 생명주기, 1차 캐시, 쓰기 지연, dirty checking, flush)

#### (1) 스프링에 영속성 컨텍스트라고 있던데 그게 뭔지 아시나요?
> ##### 스프링 영속성 컨텍스트에 대해서 설명드리면 스프링과 DB 사이에 JPA에 의해 관리되는 엔티티 매니저라는 계층을 두고 관리하고자 하는 엔티티를 해당 계층에서 관리하는 개념입니다. 
```
주로 엔티티 매니저 팩토리를 통해 엔티티 매니저라는 객체를 할당받아 persist해서 객체를 관리 대상에 추가하게 됩니다. 이런식으로 엔티티 매니저를 통해 관리하게 되면 단순히 객체만 변경해도
DB에 변경 사항을 전달하는 flush를 하는 경우에 맨 처음 객체의 상태와 비교해서 그에 맞는 쿼리를 전송해주는 더티 체킹이나 변경 사항에 대해 바로 DB에 전달하지 않고 가지고 있다 flush 시점에
한번에 보내는 쓰기 지연, 이미 조회해온 내용이거나 변경 사항을 인지하고 있는 경우라면 
```

<details>
<summary> 꼬리질문 1. </summary>

###### 꼬리질문 1. 영속성 컨텍스트가 없다면 어떤 문제가 발생할 수 있나요?

```
영속성 컨텍스트가 없다면 앞서 말한 쓰기 지연, 캐시, 더티 체킹 같은 작업들을 모두 할 수 없어 객체를 통해 DB에 접근하는게 굉장히 어려워집니다.
```

</details>



<details>
<summary> 꼬리질문 z. </summary>

###### 꼬리질문 z. 여기서도 동시성 이슈가 발생할 수 있을 거 같은데, 애플리케이션 레벨에선 해결 못하겠죠?

```
버전 정보를 확인하는 낙관적락이나 아예 해당 로우에 접근 못하도록 비관적 락을 사용할 수 있을 거 같습니다. 아니면 데이터베이스 레벨에서 격리성 레벨을 조절하는 것도 방법으로 보입니다.
```

</details>


----------







<br><br><br><br>

## [3. 인성면접 질문 복습]


----------


### 1. 언제 그리고 왜 개발자가 되기로 결심했는지


#### (1) -
> ##### -
```
-
```

<details>
<summary> 꼬리질문 1. </summary>

###### 꼬리질문 1. -

```
-
```

</details>




----------


### 2. 앞으로 어떤 개발자가 되고 싶으세요?

#### (1) -
> ##### -
```
-
```

<details>
<summary> 꼬리질문 1. </summary>

###### 꼬리질문 1. -

```
-
```

</details>


----------


### 3. 어떤 개발자가 잘하는 개발자라고 생각하시나요?

#### (1) -
> ##### -
```
 커뮤니케이션 -> 소신 -> 다른 환경, 리소스에서 빠르게 결과를 내기 위해선 소신 자기 소신을 관철하고 이해시키고 동의받을 수 있는 대화 능력이 필요
```

<details>
<summary> 꼬리질문 1. </summary>

###### 꼬리질문 1. -

```
-
```

</details>


----------


### 4. 왜 백앤드 개발이 하고 싶었는지

#### (1) -
> ##### -
```
 -
```

<details>
<summary> 꼬리질문 1. </summary>

###### 꼬리질문 1. -

```
-
```

</details>

----------


### 5. 문제를 어떻게 해결하나요?

#### (1) -
> ##### -
```
 -
```

<details>
<summary> 꼬리질문 1. </summary>

###### 꼬리질문 1. -

```
-
```

</details>


