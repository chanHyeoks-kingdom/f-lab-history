## 1. LAZY LOADING에 관하여
- LAZY LOADING을 이용하면 아예 N+1 문제가 안 나긴 하나요 ..? 아예 안나긴 하는거겠죠?

```
컨셉을 이해해야 합니다.

레이지 로딩은 지연 로딩이라는거고, 결국 어떤 조인되는 정보를 한번에 불러오지 않을 때 사용합니다.
그래서 요구사항에 따라 생각해보면 좋아요.

(1) 보통 조인을 했을 때 연결되는 객체의 수가 적으면 뭐 .. 가져와도 상관 없겠죠?
(2) 근데 오더 하나에 제품이 많이, 20~30개 되는데 굳이 끌어오지 않아도 되는 요구사항이 있다면 그 때 LAZY LOADING을 쓰면 좋다.

N+1을 안일으키는 방법은 레이지 로딩, 페치조인, 엔터티 그래프 등의 방법들이 있다.
```


## 2. JPA에 대한 이해도를 높이기 위해선
- JPA에 대한 이해도가 필요하면 Mybatis나 JDBC를 직접 써보는 것도 좋다.



## 3. 목표 설정
- 목표는 최소한의 기능 개발 같은 결과적인 부분 보단 배워가는 것 자체가 목표가 되야하낟.

```
완성시키고 기능을 개발시키고가 목표가 아니다. 하나도 동작 안해도 된다.
JPA는 이런거구나, 단위 테스트는 이런거구나 같이 이번에 배운 것 처럼 무언가 배운게 중요한거다.
```


## 4. OrderRepository와 OrderItemRepository를 나눈 이유가 무엇일까?
```
Order 안에 OrderItem이라는게 OneToMany로 들어가 있으면 되는 거 아닌가요? 
만약에 Order에 그냥 넣어버리면 자동으로 OrderItem이 등록이 돼야 하는데 왜 saveOrder를 두번하는지 ..
```

## 5. TotalPrice가 DB에 저장 해야 하는지 고민해볼 필요가 있다.
```
이 녀석이 필드에 들어갈 필요가 있는가, OrderItem 별로 다 가격이 있을텐데 그냥 Item 리스트 받는 곳에서 가격 보고 출력하면 안되는가?
굳이 별도 필드로 두어야하는가. CalculatorPrice, getPrice등의 메서드를 이용할 수 있을 것이다.
```

## 6. APM
- 애플리케이션 모니터링이란 건 애플리케이션이 잘 돌아가는지를 확인하는 것 입니다.
- 스카우터, visualVm, 프로메테우스, 그라파나 각각의 분야에 특화된 등의 오픈소스를 사용하는 방법과 비용을 지불하고 제니퍼, 데이터 도그등을 사용해 종합적인 솔루션을 제공받는 방법이 있습니다.

```
APM 툴의 존재 이유는 뭘까요?
```

##### (1) GC 비율, 지연 시간의 급증, 데이터 베이스 컨넥션 시간 급증, 데이터 베이스 유휴 커넥션 개수 [기술적인 지표]
##### (2) 고객의 이상 행동 (매크로를 이용한 폭발적인 요청)등의 이상 징후를 파악해 장애를 `예방`하고 `빠르게 대처`하기 위함

```
어떻게 장애가 발생했는지, 발생할지 알 수 있을까요?
```

##### (1) 메모리에 대해 장애 발생 징후를 파악하기 위해 사전에 지정한 임계치가 넘어가면 노티피케이션이나 알림을 줄 수 있을 것 같다.


## 7. IaC
- 우리가 인프라를 구축할 때 특히 AWS등의 클라우드를 사용할 때, 예컨대 EC2 같은 인스턴스 생성시에 필요한 CPU, 사용자 ID, VPC 설정등의 다양한 정보들을 JSON 같은 형식의 문서를 통해 지정해두고 이들의 조합을 통해 자동으로 구축한다.

```
일반적으로 AWS에서 EC2를 빌리는 절차는 어떻게 되나요?
```

- AWS 콘솔에 들어가서 리전을 선택하고 EC2 자원 정보(CPU, 운영체제 등 ..)를 입력합니다.


```
만약 1000번의 생성이 필요하다면요?
```
- 사람이 1000번 작업을 해줘야합니다.


```
이 작업의 문제가 뭘까요?
```
- 사람이 직접 하다보면 실수 할 수도 있고 잘못 된 상태로 100개의 인스턴스를 작업했으면 또 100번 수정해주어야 합니다.
- 쿠팡 처럼 큰 기업은 무조건 IaC를 사용한다. (필요한 자원이 많기에, 사람이 직접 다 할 수 없다.)


```
IaC는 그런 문제를 해결해줄 수 있겠네요? 그럼 문제 해결을 위한 측면 외에 그냥 순수한 장점은 또 뭐가 있을까요?
```
- 인스턴스 생성을 위한 문서를 이용해서 테라폼을 활용하면 쉽게 생성, 수정, 삭제할 수 있다.
- Git같은 도구와 연동하면 작업에 대한 히스토리나 협업에도 큰 도움을 받을 수 있다.

```
만약 여러 팀이 테라폼을 이용해 명세서를 관리할 때 한 번에 모아서 하는 것 보다 각 팀이 각자 관리하는게 좀 더 안전할 수 있다.
```
- 무언가 문제가 생길 경우 영향도가 크게 전파될 수 있다.

```
CI/CD에서 테스트 서버 위에 테스트만 돌리고 싶을 때 테라폼을 이용해 도커 같은걸 패키징 해서 테스트 서버 자동 생성 후 테스트 끝내고 다시 지우는 방식을 사용가능
- 테스트가 돌 때만 서버 돌려서 비용 지불하고 테스트 마무리되면 끝나는 유스 케이스도 있다.
```



## 8. 분산 캐시

```
마트에 가면 캐셔 분들이 자주 판매되는 상품은 단축키로 설정을 해두는데 이런 즐겨 찾기가 캐시입니다.
근데 분산 캐시라는건 그런 즐겨찾기를 여러 서버에서 관리하는 거고 이를 위해 각 서버의 동기화가 필요한데 이를 위해 클러스터링, 센티넬, 샤딩등의 방법을 이용할 수 있습니다.
```

> 근데 단일 캐시 안쓰고 분산 캐시를 쓰나요?
```
캐시를 제공하는 서버가 여러개일 경우 많은 부하가 발생했을 때 보다 안정적이고 빠르게 캐시를 활용할 수 있고 하나의 서버에서 문제가 생기더라도 다른 서버의 캐시를 사용할 수 있다는 장점이 있습니다.
```

> 분산 캐시에 저장할 수 있는 것들은 어떤게 있을까요?
```
다양한 타입을 다 활용할 수 있지만 결국 인메모리여서 휘발성이기 때문에 백업용 디비에 넣는다고 하더라도 날아가면 문제가 있는 입금 정보나 재고 정보등을 넣으면 안된다.
```



## 9. API GATEWAY
> API GATEWAY는 왜 나왔을까?
```
ORDER에 createOrder, deleteOrder라는 엔드포인트가 두 개가 있고 IP가 다르면 고객이 주소 두 개를 알고 있어야 하네요? 그러면 어디다 요청을 보내면 좋을까요?
```

- GATEWAY, 그냥 대문으로 보내면 될 거 같습니다.

* 그래서 API GATEWAY예요. (내부 인스턴스 신경쓸 필요 없이, 대문 주소와 그 집에 누구한테 보낼지만 알면 된다.)


## 10. 로드밸런서
> 로드밸런서는 뭔가요?
```
로드 (부하)의 밸런서(균형을 맞춰 주는 것)

- 부하를 상황, 밸런서를 역할이라고 생각하면 "부하가 있는 상황에 밸런스를 맞춰주는 역할을 한다."
- 서버가 두 대가 있을 때 아무런 상관 없이 그냥 골고루 밸런스 맞춰주는 걸 라운드로빈이라고 한다.
- 네트워크, 거리등을 토대로 우선순위를 둬 부하를 맞춰주는 경우도 있다.
```








